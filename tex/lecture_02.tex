% !TeX program = lualatex
% !TeX encoding = utf-8

\documentclass[master.tex]{subfiles}
% \documentclass[11pt]{report}
% \input{./preamble.tex}

\begin{document}
\section{Constructing the integers and rational numbers}
    \subsection{Relations}
        Let $X$ be any set.
        A \textbf{relation} $R$ on $X$ is a particular subset $R \subset X \times X$ that is
        \begin{itemize}
            \item \textbf{reflexive} if $\forall x \in X$ $(x, x) \in R$;
            \item \textbf{symmetric} if $\forall x, y \in X$ $(x, y) \in R \iff (y, x) \in R$;
            \item \textbf{transitive} if $\forall x, y, z \in X$ $\left[ (x, y) \in R \text{ and } (y, z) \in R \right] \implies (x, z) \in R$.
        \end{itemize}
        The statement $(x, y) \in R$ is read ``$x$ is \emph{related} to $y$.''
        Alternatively, we write this as $x \sim y$.

        $R$ is called an \textbf{equivalence relation} if it is reflexive, symmetric, and transitive.
        For any equivalence relation $R$ on a set $X$, we define the \emph{equivalence class} of $x \in X$ by
        \[
            \eqclass{x} = \set{y \in X \mid x \sim y}
        ,\]
        where $\eqclass{\cdot}: X \rightarrow 2^X$ is a mapping from $x$ to its equivalence class.
        The set of all equivalence classes is the image of $X$ under $\eqclass{\cdot}$,
        \[
            \faktor{X}{\sim} = \Ima{\left\lbrack \cdot \right\rbrack} \subset 2^X  
        .\]

        \begin{remark}
            Let $X$ be any set with $\sim$ an equivalence relation on $X$.
            Then
            \[
                X = \bigcup_{Y \in \nicefrac{X}{\sim}} Y  
            ,\]
            i.e.\ the equivalence relation $\sim$ partitions $X$ into a disjoint collection of equivalence classes.
            \hr{}
            \begin{proof}
                Let $Y, Z \subset X$ be equivalence classes.
                Note that equivalence classes are nonempty since equivalence relations are reflexive, so it suffices to prove that if $Y \cap Z \neq \emptyset$, then $Y = Z$.

                Let $x_0 \in Y \cap Z$, $x_1 \in Y$, and $x_2 \in Z$.
                Then $x_0 \sim x_1$ and $x_0 \sim x_2$, so by symmetry and transitivity we have $x_1 \sim x_2$.
                This implies that 
                \[
                    Y = \eqclass{x_1} = \eqclass{x_2} = Z
                \]
                as desired.
            \end{proof}
        \end{remark}


    \subsection{Grothendieck groups}
        Recall that a \emph{semigroup} is an algebraic structure consisting of a set together with an associative binary operation.
        Our definition of $\N$ equipped with $+$ constitutes a semigroup, so we now introduce commutative semigroups with cancellation.
        \begin{definition}{Commutative semigroup with cancellation}{commutative-cancellative-semigroup}
            $(S, +)$ is a \textbf{commutative semigroup} if, for all $a, b, c \in S$, we have
            \begin{itemize}
                \item $(a + b) + c = a + (b + c)$,
                \item $a + b = b + a$.
            \end{itemize}
            $(S, +)$ has the \textbf{cancellation property} if, for all $a, b, c \in S$,
            \[
                a + c = b + c \implies a = b
            .\]
        \end{definition}

        \begin{lemma}{}{n-additive-cancellation}
            $(\N, +)$ has the cancellation property.
            \hr{}
            \begin{proof}
                Let $A(m)$ be the statement
                \[
                    \forall k, l \in \N \quad k + m = l + m \implies k = l
                ,\]
                and we will prove by induction that $A(m)$ holds for all $m \in \N$.
                When $m = 1$ we have
                \[
                    l + 1 = k + 1 \iff S(l) = S(k)  
                ,\]
                which implies $l = k$ since $S$ is injective.

                Now assume $A(m)$ is true for some $m \geq 1$.
                Let $l, k \in \N$ satisfy
                \[
                    l + (m + 1) = k + (m + 1)
                .\]
                Then by associativity and the induction hypothesis,
                \begin{align*}
                    (l + m) + 1 = (k + m) + 1 &\xRightarrow{A(1)} l + m = k + m \\
                    &\xRightarrow{A(m)} k = l.
                \end{align*}
            \end{proof}
        \end{lemma}

        Recall that an \emph{abelian group} is a group whose operation is commutative:
        \begin{definition}{Abelian group}{abelian-group}
            $(G, \circ, 1)$ is an \textbf{abelian group} if it satisfies:
            \begin{itemize}
                \item \eqmakebox[abelianAxioms][l]{$1 \circ g = g \circ 1 = g$} \emph{identity}
                \item \eqmakebox[abelianAxioms][l]{$(g \circ h) \circ k = g \circ (h \circ k)$} \emph{associativity}
                \item \eqmakebox[abelianAxioms][l]{$\forall g \: \exists! \, h \quad g \circ h = h \circ g = 1$ \qquad\qquad} \emph{invertibility}
                \item \eqmakebox[abelianAxioms][l]{$g \circ h = h \circ g$} \emph{commutativity}
            \end{itemize}
        \end{definition}
        As we will now see, abelian groups are central to our construction of $\R$ through the construction of \emph{Grothendieck groups}.\footnote{
            Construction of such groups first introduced by Alexander Grothendieck, 1928--2014.
        }

        \begin{lemma}{Grothendieck lemma}{grothendieck-lemma}
            Let $(S, +)$ be a nonempty commutative semigroup with cancellation.
            Then there exists a smallest abelian group containing $S$, called the \textbf{Grothendieck group} for $S$.
            \hr{}
            \begin{proof}
                We first construct an abelian group $G$ from $S$.
                For any $a, b, c, d \in S$, define the relation $(a, b) \sim (c, d)$ if and only if $a + d = b + c$.\footnote{
                    This idea comes from fractions: $\frac{a}{b} = \frac{c}{d} \iff ad = bc$, but our operation is additive rather than multiplicative.
                }
                Indeed, this is an equivalence relation on $S$.
                For transitivity, assume $(a, b) \sim (c, d) \sim (e, f)$.
                Then
                \begin{align*}
                    \left.\begin{aligned}
                        a + d &= b + c \\
                        c + f &= d + e
                    \end{aligned}\right\}
                    &\implies a + d + c + f = b + c + d + e \\
                    &\implies a + f = b + e \\
                    &\implies (a, b) \sim (e, f).
                \end{align*}
                Proof of reflexivity and symmetry is left to the reader.

                Now let $G := \nicefrac{(S \times S)}{\sim}$ be equipped with the binary operation $+$ defined by
                \[
                    \eqclass{(a, b)} + \eqclass{(c, d)} := \eqclass{(a + c), (b + d)}    
                .\]
                This operation is well-defined and clearly associative and commutative; proofs of these claims are also left to the reader.

                To confirm that $G$ is a group, it remains to show that $G$ has an identity element and unique inverses.
                For the former, fix any $a \in S$.
                Note that for all $a, b, c \in S$, $(a, a) \sim (b, b)$ since $a + b = a + b$; and
                \[
                    \eqclass{(a, a)} + \eqclass{(b, c)} = \eqclass{(a + b, a + c)} = \eqclass{(b, c)}  
                \]
                because $a + b + c = a + c + b$.
                Thus, $\eqclass{(a, a)} = 0$ is an identity for $G$.

                For inverses, consider any $\eqclass{(a, b)} \in G$.
                Take $\eqclass{(b, a)}$ so that
                \[
                    \eqclass{(a, b)} + \eqclass{(b, a)} = \eqclass{(a + b, a + b)} = 0
                ,\]
                hence $\eqclass{(a, b)}$ is invertible.
                Proof of uniqueness is left to the reader.

                So far, we have shown that $G$ is indeed an abelian group.
                Proof that $G$ contains $S$ and is the \emph{smallest} such abelian group is covered in the exercises.
            \end{proof}
        \end{lemma}

        Naturally, our interest in the Grothendieck lemma is in constructing the integers and the rational numbers from the natural numbers.
\end{document}
